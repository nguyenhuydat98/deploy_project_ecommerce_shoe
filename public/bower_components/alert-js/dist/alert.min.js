/*
alert.js
@version 0.1.2
@author Robert Ontiu
 */
"use strict";!function(a,b,c){return"object"!=typeof b?void console.error("alert.js requires a valid window object to work with!"):(b._alert=window.alert,b.alert=c(a,b),void("object"==typeof module?module.exports=b.alert:"function"==typeof define&&define.amd&&define(function(){return b.alert})))}(this,this.window,function(a,b){var c={displayHeader:!0,closeButton:!0,close:null,title:"Alert!",skipQueue:!1,draggable:"function"==typeof b.jQuery&&"object"==typeof b.jQuery.ui&&"function"==typeof b.jQuery.fn.draggable,position:{top:"10%",left:"center"},buttons:{Ok:function(a){a.close()}}},d=function(){this.init.apply(this,arguments)};d.prototype.init=function(a,b){this.body=a,this.element=null,this.options={};for(var d=Object.keys(c),e=0,f=d.length;f>e;e++)this.options[d[e]]="object"==typeof b&&b.hasOwnProperty(d[e])?b[d[e]]:c[d[e]]},d.prototype.close=function(){null!==this.element&&(this.element.parentElement.removeChild(this.element),this.element=null,"function"==typeof this.options.close&&this.options.close(this),this.options.draggable&&b.jQuery(this.element).draggable("destroy"),d.gc(this))},d.prototype.render=function(){var a=this,c=null,d=b.document.createElement("div");if(d.className="alert-dialog",this.options.displayHeader){var e=b.document.createElement("div");e.className="alert-header",d.appendChild(e);var f=b.document.createElement("span");if(f.className="alert-title",f.appendChild(b.document.createTextNode(this.options.title)),e.appendChild(f),this.options.closeButton){var g=b.document.createElement("a");g.className="alert-close",g.innerText="x",e.appendChild(g),g.addEventListener("click",function(b){b.preventDefault(),a.close()})}c=b.document.createElement("div"),c.style.clear="both",e.appendChild(c)}var h=b.document.createElement("div");h.className="alert-body",d.appendChild(h),this.body instanceof HTMLElement?h.appendChild(this.body):"function"==typeof b.jQuery&&this.body instanceof b.jQuery?b.jQuery(h).append(this.body):h.innerHTML="string"==typeof this.body?this.body:"";var i=b.document.createElement("ul");if(i.className="alert-buttons",d.appendChild(i),null!==this.options.buttons&&"object"==typeof this.options.buttons)for(var k,l,m,n=Object.keys(this.options.buttons),o=0,p=n.length;p>o;o++)k=b.document.createElement("li"),i.appendChild(k),l=b.document.createElement("a"),l.className="alert-button",l.appendChild(b.document.createTextNode(n[o])),k.appendChild(l),m=this.options.buttons[n[o]],"function"==typeof m&&!function(b){l.addEventListener("click",function(c){c.preventDefault(),b.call(this,a)})}(m);return this.element=d,this.options.draggable&&"function"==typeof b.jQuery&&"object"==typeof b.jQuery.ui&&"function"==typeof b.jQuery.fn.draggable&&(b.jQuery(this.element).draggable({containment:"parent",handle:".alert-header",stop:function(){j(a)}}),this.element.style.position="absolute"),d};var e=[];d.gc=function(a,b){if(a instanceof d)return null!==a.element?void a.close():void e.push(a);var c;return e.length>0?(c=e.shift(),c.init(a,b)):c=new d(a,b),c};var f=[],g=null,h=null,i=function(a){return null!==h&&null!==a.element?(a.element.style.left="center"===a.options.position.left?.5*(h.offsetWidth-a.element.offsetWidth)+"px":a.options.position.left,a.element.style.top="center"===a.options.position.top?.5*(h.offsetHeight-a.element.offsetHeight)+"px":a.options.position.top,a):void 0},j=function(a){if(null!==h&&null!==a.element){var b=(a.element.offsetLeft+.5*a.element.offsetWidth)/h.offsetWidth*100,c=(a.element.offsetTop+.5*a.element.offsetHeight)/h.offsetHeight*100;return a.element.style.left="calc("+b+"% - "+.5*a.element.offsetWidth+"px)",a.element.style.top="calc("+c+"% - "+.5*a.element.offsetHeight+"px)",a}},k=function(a,e){if(0!==arguments.length){if(a instanceof HTMLElement||"function"==typeof b.jQuery&&a instanceof b.jQuery||"string"==typeof a)return"string"==typeof a&&(a=a.replace("\n","<br/>")),"object"==typeof e&&e.skipQueue?f.unshift(d.gc(a,e)):f.push(d.gc(a,e)),void(null!==h&&null===g&&k());if("object"==typeof a)for(var l=Object.keys(c),m=0,n=l.length;n>m;m++)a.hasOwnProperty(l[m])&&(c[l[m]]=a[l[m]])}else{if(null===h)return;if(null!==g&&(g.close(),g=null,h.style.display="none"),f.length>0){g=f.shift();var o=g.options.close;g.options.close=function(){"function"==typeof o&&o.apply(this,arguments),k()},h.style.display="block",h.appendChild(g.render()),j(i(g))}}};return b.document.addEventListener("DOMContentLoaded",function(a){h=b.document.createElement("div"),h.className="alert-container",h.style.display="none",b.document.body.appendChild(h),k()}),k});